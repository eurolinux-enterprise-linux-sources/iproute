From e36e4077efd4d662274c66c248f5051f35967995 Mon Sep 17 00:00:00 2001
From: Timothy Redaelli <tredaelli@redhat.com>
Date: Thu, 9 Feb 2017 18:55:30 +0100
Subject: [PATCH] ip: vfinfo: remove code duplication for IFLA_VF_RSS_QUERY_EN
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Bugzilla: https://bugzilla.redhat.com/show_bug.cgi?id=1264149
Upstream Status: iproute2.git commit fd4ca03

commit fd4ca03935b13789a3e5f01eeda1395ed6cb3b2a
Author: Julien Fortin <julien@cumulusnetworks.com>
Date:   Fri Dec 16 17:36:05 2016 +0100

    ip: vfinfo: remove code duplication for IFLA_VF_RSS_QUERY_EN

    Fixes: 4fb4a10e120b1 ("ipaddress: Print IFLA_VF_QUERY_RSS_EN setting‚Äù)

    Signed-off-by: Julien Fortin <julien@cumulusnetworks.com>
    Acked-by: Phil Sutter <phil@nwl.cc>

Signed-off-by: Timothy Redaelli <tredaelli@redhat.com>
---
 ip/ipaddress.c | 8 --------
 1 file changed, 8 deletions(-)

diff --git a/ip/ipaddress.c b/ip/ipaddress.c
index a38cef0..e39137f 100644
--- a/ip/ipaddress.c
+++ b/ip/ipaddress.c
@@ -357,14 +357,6 @@ static void print_vfinfo(FILE *fp, struct rtattr *vfinfo)
 			fprintf(fp, ", query_rss %s",
 			        rss_query->setting ? "on" : "off");
 	}
-	if (vf[IFLA_VF_RSS_QUERY_EN]) {
-		struct ifla_vf_rss_query_en *rss_query =
-			RTA_DATA(vf[IFLA_VF_RSS_QUERY_EN]);
-
-		if (rss_query->setting != -1)
-			fprintf(fp, ", query_rss %s",
-			        rss_query->setting ? "on" : "off");
-	}
 }
 
 static void print_num(FILE *fp, unsigned width, uint64_t count)
-- 
1.8.3.1

